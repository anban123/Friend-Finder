<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>FF Survey</title> 

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">

    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery.js"></script>

    <!-- Bootstrap  -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">

    <!-- Chosen -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>
</head>
<body>
    <!-- Bootstrap Modal -->
    <div id="modal-id" class="modal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">Best Match!</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                  <button type="button" class="btn btn-primary">Save changes</button>
                </div>
              </div>
            </div>
          </div>

    <div class="container">
        <h2>Survey Questions</h2>
        <hr>
        <h3><strong>About You</strong></h3>

        <h4>Name (Required)</h4>
        <input type="text" id="name" class="form-control" required>

        <h4>Link to Photo Image (Required)</h4>
        <input type="text" id="photo" class="form-control" required>
        <hr>

        <h3><strong>Questions 1</strong></h3>
        <h4>I like cats.</h4>
        <select id="drop-down-one">
            <option value></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

        <h3><strong>Question 2</strong></h3>
        <h4>You'd rather drink coffee than tea.</h4>
        <select id="drop-down-two">
            <option value></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        
        <h3><strong>Question 3</strong></h3>
        <h4>You'd rather have pizza than a salad.</h4>
        <select id="drop-down-three">
            <option value></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

        <h3><strong>Question 4</strong></h3>
        <h4>You'd rather stay in and watch Netflix than go to a bar on a Friday night.</h4>
        <select id="drop-down-four">
            <option value></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        
        <h3><strong>Question 5</strong></h3>
        <h4>You like to spend your weekends being active like hiking and/or working out.</h4>
        <select id="drop-down-five">
            <option value></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        
        <h3><strong>Question 6</strong></h3>
        <h4>You have a strict morning schedule.</h4>
        <select id="drop-down-six">
            <option value></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        
        <h3><strong>Question 7</strong></h3>
        <h4>Being with a group of people energizes you.</h4>
        <select id="drop-down-seven">
            <option value></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        
        <h3><strong>Question 8</strong></h3>
        <h4>You'd rather watch a marvel movie than an artsy movie.</h4>
        <select id="drop-down-eight">
            <option value></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        
        <h3><strong>Question 9</strong></h3>
        <h4>You like to watch any sport than happens to be on TV.</h4>
        <select id="drop-down-nine">
            <option value></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        
        <h3><strong>If you found $20 on the ground you'd keep it.</strong></h3>
        <h4>Put the question here?</h4>
        <select id="drop-down-ten">
            <option value></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

    <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit">
        <i class="fa fa-check-circle" aria-hidden="true"></i>
        "Submit"
    </button>

    <hr>

    <footer class="footer">
            <div class="container">
              <p><a href="/api/friends">API Friends List</a> | <a href="https://anban123.github.io/Friend-Finder/" target="_blank">Github Page</a>
            </div>
    </footer>

    <script>src="https://code.jquery.com/jquery-3.2.1.min.js"</script>

    <!-- HANDLES HOW FORM DATA IS LOADED FROM THE SERVER -->
    <script type="text/javascript">
    $("#submit").on("click", function(event) {
        event.preventDefault();
        
        // Form validation
        var valid = true;
		if($("#name").val() === "" || $("#photo").val() === "") {
			valid = false;
        } else if( 
        $("#drop-down-one").val() === "empty" || 
        $("#drop-down-two").val() === "empty" || 
        $("#drop-down-three").val() === "empty" || 
        $("#drop-down-four").val() === "empty" || 
        $("#drop-down-five").val() === "empty" || 
        $("#drop-down-six").val() === "empty" || 
        $("#drop-down-seven").val() === "empty" || 
        $("#drop-down-eight").val() === "empty" || 
        $("#drop-down-nine").val() === "empty" ||
        $("#drop-down-ten").val() === "empty") 
        {
			valid = false;
        };

        if(valid === true) {

            // Here we grab the form elements
            var newFriend = {
            name: $("#name").val().trim(),
            photo: $("#photo").val().trim(),
            answers: [
                $("#drop-down-one").val(),
                $("#drop-down-two").val(),
                $("#drop-down-three").val(),
                $("#drop-down-four").val(),
                $("#drop-down-five").val(),
                $("#drop-down-six").val(),
                $("#drop-down-seven").val(),
                $("#drop-down-eight").val(),
                $("#drop-down-nine").val(),
                $("#drop-down-ten").val(),
            ]
        };
        };

        //Modal
        $.ajax({
            method: "POST",
            url: "/api/friends",
            data: newFriend
        }).then(function(res) {
            console.log(res);

            $(".modal-body").append(`<img style="max-width:100px" src="${res.matchPhoto}">`);
            $(".modal-body").append(`<h2>${res.matchName}</h2>`);
            
    
            $('#modal-id').modal()
            
    }); 
    });

     
    // Clear form after submitting
    
    </script>
    
</body>
</html>